Apache Ant - Notes
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Running the Java task, with permissions
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

A permissions set implictly contains the following permissions:

    <grant class="java.net.SocketPermission" name="localhost:1024-" actions="listen">
    <grant class="java.util.PropertyPermission" name="java.version" actions="read">
    <grant class="java.util.PropertyPermission" name="java.vendor" actions="read">
    <grant class="java.util.PropertyPermission" name="java.vendor.url" actions="read">
    <grant class="java.util.PropertyPermission" name="java.class.version" actions="read">
    <grant class="java.util.PropertyPermission" name="os.name" actions="read">
    <grant class="java.util.PropertyPermission" name="os.version" actions="read">
    <grant class="java.util.PropertyPermission" name="os.arch" actions="read">
    <grant class="java.util.PropertyPermission" name="file.encoding" actions="read">
    <grant class="java.util.PropertyPermission" name="file.separator" actions="read">
    <grant class="java.util.PropertyPermission" name="path.separator" actions="read">
    <grant class="java.util.PropertyPermission" name="line.separator" actions="read">
    <grant class="java.util.PropertyPermission" name="java.specification.version" actions="read">
    <grant class="java.util.PropertyPermission" name="java.specification.vendor" actions="read">
    <grant class="java.util.PropertyPermission" name="java.specification.name" actions="read">
    <grant class="java.util.PropertyPermission" name="java.vm.specification.version" actions="read">
    <grant class="java.util.PropertyPermission" name="java.vm.specification.vendor" actions="read">
    <grant class="java.util.PropertyPermission" name="java.vm.specification.name" actions="read">
    <grant class="java.util.PropertyPermission" name="java.vm.version" actions="read">
    <grant class="java.util.PropertyPermission" name="java.vm.vendor" actions="read">
    <grant class="java.util.PropertyPermission" name="java.vm.name" actions="read">

    <permissions>
        <grant  class="java.lang.RuntimePermission" name="*"/>
        <grant class="java.io.FilePermission" name="?????" actions="read,write,delete,execute" />
        <!--grant class="java.lang.RuntimePermission" name="exitVM" /-->
    </permissions>

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Using Maven dependencies in build.xml
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

<project .... xmlns:artifact="antlib:org.apache.maven.artifact.ant">

    <property environment="env" />
    <property name="maven.repository" value="${env.M2_REPO}" />
    <property name="libs.maven-ant-tasks.version" value="2.0.10" />

    <!-- Define the maven-ant-tasks type, to allow for processing of this module's pom -->
    <path id="maven-ant-tasks.classpath" path="${maven.repository}/org/apache/maven/maven-ant-tasks/${libs.maven-ant-tasks.version}/maven-ant-tasks-${libs.maven-ant-tasks.version}.jar" />
    <typedef uri="antlib:org.apache.maven.artifact.ant" resource="org/apache/maven/artifact/ant/antlib.xml" classpathref="maven-ant-tasks.classpath" />

    <!-- Load the dependencies from the current module's pom -->
    <artifact:pom id="module-pom" file="${module.root}/pom.xml" />
    <artifact:dependencies filesetId="module-dependencies" pomRefId="module-pom" />
    <path id="module-classpath">
        <fileset refid="module-dependencies" />
        <pathelement location="....."/> <!-- other path elements here -->
    </path>

    <property resource="templates/velocity-common-settings.properties" classpathref="module-classpath"/>
    <taskdef name="..." classname="...." classpathref="module-classpath"/>
</project>
