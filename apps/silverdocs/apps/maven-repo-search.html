<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
    <title>Multi Maven repo search | SilverDocs</title>
    <meta http-equiv="pragma" content="no-cache"/>
    <meta http-equiv="cache-control" content="no-cache"/>
    <meta http-equiv="expires" content="0"/>
    <meta http-equiv="keywords" content="maven, repository, search, application"/>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <style type="text/css">
        h1 {
            font-size: 12pt;
            font-family: Arial, sans-serif;
            color: #FFF;
            background-color:#777;
            margin: 0px;
            margin-top: 5px;
            padding: 2px;
            width: 100%;
        }
        .repoIframe {
            width: 100%;
            height: 250px;
            border: solid 1px #777;
        }
    </style>

    <script type="text/javascript">
        //<!--
        searchOnGoogleQuery = "http://www.google.com/search?q=site%3A{site}+maven2+{search}";

        repoLocations = new Array();
        repoLocations[0] = {name:"Maven Central (maven.org)", location:"maven.org"};
        repoLocations[1] = {name:"IBiblio (ibiblio.org)", location:"ibiblio.org"};

        function generateContent() {
            var currentLocation = document.location.href;
            var searchTermLocation = currentLocation.indexOf("query=");
            if (searchTermLocation < 0) {
                alert("Invalid app usage. Call this page with ...?query=your-repo-query");
                return;
            }
            var searchTerm = currentLocation.substr(searchTermLocation + 6);
            var workContent = "<table width='100%'>";

            for (index = 0; index < repoLocations.length; index++) {
                if ( index % 2 == 0 ) {
                    workContent += "<tr>";
                }

                var repoLocation = repoLocations[ index ];
                var searchQuery = searchOnGoogleQuery.replace("{site}", repoLocation.location).replace("{search}", searchTerm);
                workContent += "<td>";
                workContent += "<h1>" + repoLocation.name + "</h1>";
                workContent += "<iframe class='repoIframe' src='" + searchQuery + "'></iframe>";
                workContent += "</td>";

                if ( index % 2 == 1 ) {
                    workContent += "</tr>";
                }
            }

            workContent += "</table>";

            document.getElementById("workArea").innerHTML = workContent;
        }
        //-->
    </script>
</head>
<body onload="generateContent();">
    <div id="workArea" style="width:100%;height:100%;"></div>
</body>
</html>
